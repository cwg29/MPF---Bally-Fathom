#config_version=5
#### FATHOM ####
#CobraPin Example Config
hardware:
    platform: opp
    driverboards: gen2
    segment_displays: light_segment_displays
    

#### CobraPin Serial Segment Displays ####
#create light group for each NeoSeg display.  120 leds for 8 digit type and 30 for 2-digit type
neoseg_displays:
  neoSeg_0:
    start_channel: 3-0-0
    size: 8digit
    light_template:
      type: w
      subtype: led
      color_correction_profile: NeoSeg_white
  neoSeg_1:
    start_channel: 3-0-120
    size: 8digit
    light_template:
      type: w
      subtype: led
      color_correction_profile: NeoSeg_white
  neoSeg_2:
    start_channel: 3-0-240
    size: 8digit
    light_template:
      type: w
      subtype: led
      color_correction_profile: NeoSeg_white
  neoSeg_3:
    start_channel: 3-0-360
    size: 2digit
    light_template:
      type: w
      subtype: led
      color_correction_profile: NeoSeg_white
  neoSeg_4:
    start_channel: 3-0-390
    size: 2digit
    light_template:
      type: w
      subtype: led
      color_correction_profile: NeoSeg_white
  neoSeg_5:
    start_channel: 3-0-420
    size: 8digit
    light_template:
      type: w
      subtype: led
      color_correction_profile: NeoSeg_white
      
#use light groups to arrange into a segment display
segment_displays:
  neoSegP3:
    number: 1
    size: 16
    integrated_dots: true
    use_dots_for_commas: true
    default_transition_update_hz: 30
    platform_settings:
      light_groups:
        - neoSeg_0
        #- neoSeg_1    ### you can group displays together
      type: 14segment
  neoSegP1:
    number: 1
    size: 16
    integrated_dots: true
    use_dots_for_commas: true
    default_transition_update_hz: 30
    platform_settings:
      light_groups:
        - neoSeg_1
        #- neoSeg_1
      type: 14segment
  neoSegP2:
    number: 1
    size: 16
    integrated_dots: true
    use_dots_for_commas: true
    default_transition_update_hz: 30
    platform_settings:
      light_groups:
        - neoSeg_2
        #- neoSeg_1
      type: 14segment
  neoSegball:
    number: 1
    size: 4
    integrated_dots: true
    use_dots_for_commas: true
    default_transition_update_hz: 30
    platform_settings:
      light_groups:
        - neoSeg_3
        #- neoSeg_1
      type: 14segment
  neoSegcredit:
    number: 1
    size: 4
    integrated_dots: true
    use_dots_for_commas: true
    default_transition_update_hz: 30
    platform_settings:
      light_groups:
        - neoSeg_4
        #- neoSeg_1
      type: 14segment
  neoSegP4:
    number: 1
    size: 16
    integrated_dots: true
    use_dots_for_commas: true
    default_transition_update_hz: 30
    platform_settings:
      light_groups:
        - neoSeg_5
        #- neoSeg_1
      type: 14segment
      
#use color_correction_profile whitepoint to adjust the brightness of each
#NeoSeg display
light_settings:
  color_correction_profiles:
    NeoSeg_red:
      whitepoint: [.8, .8, .8]
    NeoSeg_white:
      whitepoint: [.55, .55, .55]
    NeoSeg_blue:
      whitepoint: [.5, .5, .5]
    NeoSeg_orange:
      whitepoint: [.9, .9, .9]
    NeoSeg_yellow:
      whitepoint: [1, 1, 1]
    NeoSeg_green:
      whitepoint: [.5, .5, .5]
#### CobraOin Serial Segment Displays ####
    
bcp:
  connections:
    local_display:
      port: 5050

mpf-mc:
  bcp_port: 5050
    
#FATHOM

opp:
  #Use the USB ports defined by your OS for the two STM32 boards
      ports: COM3, COM4 , COM5
  #USING SERIAL NUMBERS INSTEAD OF CHAINS
  #  Board 0 has serial number 0, Board 1 has serial number 1.
  #  This is convenient if your OS tends to reassign the serial port.
  #  MPF will automatically address the correct board even if the ports
  #     are swapped.

  #For multiple CobraPin boards in a game, you will either have to give 
  #  the STM32 boards on the second CobraPin board new serial numbers 
  #  (10 and 11 are suggested for the 2nd board since 2 is used by the 
  #  CobraPin Xpansion Board) 
  #  <OR> Use the chains section to assign a port to a board number. 
  #  Mixing these up could cause blown FETs, coils, and fuses. Proceed 
  #  with caution. Test without coil power and use the yellow coil LEDs 
  #  for feedback.
  #chains:
     #0: /dev/ttyACM0
     #1: /dev/ttyACM1
     
mpf:
     default_light_hw_update_hz: 50  # defaults to 50


psus:
    default:
    #Gives the capacitors extra time to recharge after firing a coil
    #  and eases the load on the power supply. Doesn't affect autofire
    #  devices like flippers, pops, slings.
        release_wait_ms: 50
    
    #DIRECT SWITCHES
  #switch numbers are labelled in silkscreen on the board

config:
    - keyboard.yaml
    - coils_config.yaml
    - lights_config.yaml
    - switches_config.yaml
    #- slides_config.yaml #welcome slide
    #- mc.yaml

modes:
    - base
    - lane_change
    #- skillshot
    #- extra_ball
    - bonus_collect
    - popbmpr
    - sixdropbank
    - ctrdropbank
    #- lagoontrap
    - cavetrap
    #- fathom_awards
    #- bluebonus
    #- greenbonus
    #- spinner
    #- slipstream_orbit
    #- bonus
    #- multi_ball
    #- start_selection
    #- carousel
    #- the_keep_lit_3s

game:
    balls_per_game: 3
    max_players: 4
    add_player_switch_tag: add_player

displays:
    window:
        width: 1366
        height: 390
window:
  height: 390
  width: 1366
  title: Fathom  
  resizable: false
  fullscreen: false
  borderless: false
  exit_on_escape: true
  show_cursor: false
  source_display: window
        
widget_styles:
    text_default:
        font_name: ancienttext
        font_size: 50
        adjust_top: 2
        adjust_bottom: 3
    space_title_huge:
        font_name: ancienttext
        font_size: 70
        antialias: true
        adjust_top: 3
        adjust_bottom: 3
    space_title:
        font_name: ancienttext
        font_size: 50
        antialias: true
        adjust_top: 2
        adjust_bottom: 3
    medium:
        font_name: ancienttext
        font_size: 60
        adjust_top: 1
        adjust_bottom: 1
    small:
        font_name: ancienttext
        font_size: 30
        adjust_top: 2
        adjust_bottom: 3
    tall_title:
        font_name: big_noodle_titling
        font_size: 20
        
#slide_player:
    #init_done: welcome_slide

#info_lights:    
#    player_1:
 #       light: l_led49 #led_player1
#    player_2:
#        light: l_led48 #led_player2
 #   player_3:
 #       light: l_led47 #led_player3
#    player_4:
#        light: l_led46 #led_player4
#    tilt:
#        light: l_led45 #led_tilt
#    game_over:
#        light: l_led54 #led_game_over
    #match_00:
        #light: l_led53 #led_match
    #match_10:
        #light: l_led53 #led_match
    #match_20:
        #light: l_led53 #led_match
    #match_30:
        #light: l_led53 #led_match
    #match_40:
        #light: l_led53 #led_match
    #match_50:
        #light: l_led53 #led_match
    #match_60:
        #light: l_led53 #led_match
    #match_70:
        #light: l_led53 #led_match
    #match_80:
        #light: l_led53 #led_match
    #match_90:
        #light: l_led53 #led_match        


#shows:
#- attract_light_show.yaml

##! mode: test_mode
#config_version=5
#show_player:
    #mode_attract_started: attract_display_loop
    #mode_attract_started: attract_light_show
      
playfields:
    playfield:
        tags: default
        default_source_device: bd_plunger #bd_trough  # use None in steps before 8

#coil_player:
    #s_right_inlane:
        #bell: c_bell
        #activation_switch: s_right_inlane

machine:
    balls_installed: 3
    min_balls: 1
 
ball_devices:
    bd_trough:
        ball_switches: s_trough_1, s_trough_2, s_trough_3, s_trough_jam
        eject_coil: c_trough_eject
        confirm_eject_type: target
        tags: trough, home, drain
        jam_switch: s_trough_jam
        eject_coil_jam_pulse: 15ms
        eject_targets: bd_plunger
    bd_plunger:
        ball_switches: s_shooter_lane_eject
        eject_coil: c_shooter_launch
        mechanical_eject: true
        eject_timeouts: 5s
    bd_top_saucer:
        ball_switches: s_top_saucer
        eject_coil: c_saucer_top
        eject_timeouts: 750ms
    bd_right_saucer:
        ball_switches: s_right_saucer
        eject_coil: c_saucer_right
        eject_timeouts: 750ms                
flippers:
    left_flipper:
        main_coil: c_flipper_left_main
        hold_coil: c_flipper_left_hold
        activation_switch: s_left_flipper
        label: left main flipper
        #enable_events: #machine_reset_phase_3 #temp, normally enabled when ball is in trough.
    right_flipper:
        main_coil: c_flipper_right_main
        hold_coil: c_flipper_right_hold
        activation_switch: s_right_flipper
        label: right main flipper
        #enable_events: #machine_reset_phase_3 #temp, normally enabled when ball is in trough.
    right_flipper_upper:
        main_coil: c_flipper_upper_right_main
        hold_coil: c_flipper_upper_right_hold
        activation_switch: s_right_flipper_upper
        label: right upper flipper
        #enable_events: #machine_reset_phase_3 #temp, normally enabled when ball is in trough.

autofire_coils:
    left_slingshot:
        coil: c_slingshot_left
        switch: s_left_sling_shot
        #enable_events: #machine_reset_phase_3 #temp, normally enabled when ball is in trough.
    right_slingshot:
        coil: c_slingshot_right
        switch: s_right_sling_shot
        #enable_events: #machine_reset_phase_3 #temp, normally enabled when ball is in trough.
    pop_bmp_left:
        coil: c_pop_bmp_left
        switch: s_left_pop_bumper
        #enable_events: #machine_reset_phase_3 #temp, normally enabled when ball is in trough.
    pop_bmp_right:
        coil: c_pop_bmp_right
        switch: s_right_pop_bumper
        #enable_events: #machine_reset_phase_3 #temp, normally enabled when ball is in trough.
    pop_bmp_bottom:
        coil: c_pop_bmp_bottom
        switch: s_lower_pop_bumper
        #enable_events: #machine_reset_phase_3 #temp, normally enabled when ball is in trough.
        
drop_targets:
    left1_1:
        switch: s_left_drop1_target_1
    left1_2:
        switch: s_left_drop1_target_2
    left1_3:
        switch: s_left_drop1_target_3
    left2_1:
        switch: s_left_drop2_target_1
    left2_2:
        switch: s_left_drop2_target_2
    left2_3:
        switch: s_left_drop2_target_3
    ctr_1:
        switch: s_ctr_drop_target_1
    ctr_2:
        switch: s_ctr_drop_target_2
    ctr_3:
        switch: s_ctr_drop_target_3
        
        
drop_target_banks:
    left_bank1:
        drop_targets: left1_1, left1_2, left1_3
        reset_coils: c_drop1_target_left
        reset_on_complete: 1s
    left_bank2:
        drop_targets: left2_1, left2_2, left2_3
        reset_coils: c_drop2_target_left
        reset_on_complete: 1s
    ctr_bank:
        drop_targets: ctr_1, ctr_2, ctr_3
        reset_coils: c_drop_target_ctr
        reset_on_complete: 1s
spinners:
  fathom_spinner:
    switch: s_spinner
    active_ms: 200
    idle_ms: 2000    
#ball_holds:
    #kicker_mode:
        #balls_to_hold: 1
        #hold_devices: bd_left_saucer
        #release_one_events: medium_metal_complete
        
sound_system:
    tracks:
        voice:
            volume: 1
            priority: 2
            simultaneous_sounds: 1
            #preload: true
        sfx:
            volume: 1
            priority: 1
            #preload: true
            simultaneous_sounds: 8
        music:
            volume: 0.5
            simultaneous_sounds: 1
    buffer: 1024  # previous value was 512
    frequency: 44100
    channels: 2
    master_volume: 1
    enabled: true
    
assets:
    sounds:
        default:
            track: sfx
    music:
        track: music
        mode_end_action: stop
    sfx:
        track: sfx
        #load: preload
    voice:
        track: voice
        load: preload
        
#images:
#    bonus_image_1:
#        width: 1366
#        height: 768
#        file: bonus_image_1.jpg

        
#videos:
#    star_girl_video:
#        width: 1366
#        height: 768
#        file: star_girl_comp.mp4
