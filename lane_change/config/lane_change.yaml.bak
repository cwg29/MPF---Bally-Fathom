#config_version=5
##! mode: lane_change
# in modes/lane_change

mode:
  start_events: start_mode_lane_change
  stop_events: stop_mode_lane_change
  priority: 200

shot_groups:
  lane_change:
    shots: lane_change_1, lane_change_2, lane_change_3
    reset_events:
      lane_change_on_complete: 3s
    rotate_left_events: s_left_flipper_active
    rotate_right_events: s_right_flipper_active
    
  #return_lanes_out_bns:
    #shots: return_lanes_left_out_bns_adv, return_lanes_left_in_bns_adv
    #reset_events:
      #return_lanes_out_bns_on_complete: 1s
    #disable_events: timer_timer_down_mb_running_started, the_keep_lane_hit
    #enable_events: stage_1_abc_lanes_complete
    
counters:
  lane_change_mltp_complete_count:
    count_events: lane_change_on_complete
    events_when_hit: abc_lanes_done
    starting_count: 0
    direction: up
    persist_state: false

shots:
  lane_change_1:
    switch: s_ro_upper_a
    profile: lane_change_profile
    show_tokens:
      led: led_top_a
  lane_change_2:
    switch: s_ro_upper_b
    profile: lane_change_profile
    show_tokens:
      led: led_top_b
  lane_change_3:
    switch: s_ro_upper_c
    profile: lane_change_profile
    show_tokens:
      led: led_top_c
      

shot_profiles:
  flash_quick_1:
    states:
      - name: off
        show: off
      - name: on
        show: led_color
        show_tokens:
          color: orange
        
  lane_change_profile:
    states:
      - name: off
        show: off
      - name: on
        show: led_color
        show_tokens:
          color: orange
  return_lane_profile:
    states:
      - name: off
        show: off
      - name: on
        show: led_color
        show_tokens:
          color: blue

show_player:
  lane_change_on_complete:
    color_cycle_show:
      loops: 8
      speed: 10
      show_tokens:
        led: abc_lanes
        color1: green
        color2: lime
  abc_lanes_done{count==1}:
    color_cycle_show:  #return lanes 50,000 bonus
      loops: 8
      speed: 10
      show_tokens:
        led: rtn_lane_bns, abc_lanes  #outer return lane bonus - orange arrows
        color1: green
        color2: orange
  abc_lanes_done{count==2}:
    color_cycle_show:  #return lanes 50,000 bonus
      loops: 8
      speed: 10
      show_tokens:
        led: out_lane_bns, abc_lanes  #outer return lane bonus - specials
        color1: purple
        color2: red
  abc_lanes_done{count==3}:
    color_cycle_show:  #return lanes 50,000 bonus
      loops: 8
      speed: 10
      show_tokens:
        led: led_abc_special, abc_lanes  #abc - specials
        color1: purple
        color2: red
  s_ro_left_lwr_out_active:
    color_cycle_show:  #return lanes 50,000 bonus
      loops: 3
      speed: 14
      show_tokens:
        led: led_left_org_arrow  #outer return lane bonus - specials
        color1: orange
        color2: off
  s_ro_right_lwr_out_active:
    color_cycle_show:  #return lanes 50,000 bonus
      loops: 3
      speed: 14
      show_tokens:
        led: led_right_org_arrow  #outer return lane bonus - specials
        color1: orange
        color2: off
  s_ro_left_lwr_in_active:
    color_cycle_show:  #return lanes 50,000 bonus
      loops: 3
      speed: 14
      show_tokens:
        led: led_left_special  #outer return lane bonus - specials
        color1: red
        color2: off
  s_ro_right_lwr_in_active:
    color_cycle_show:  #return lanes 50,000 bonus
      loops: 3
      speed: 14
      show_tokens:
        led: led_right_special  #outer return lane bonus - specials
        color1: red
        color2: off

        
light_player:
  abc_lanes_done{count==1}:
        rtn_lane_bns:  #outer return lane bonus - orange arrows  ##return lanes 50,000 bonus 
            color: orange
            fade: 500ms
  abc_lanes_done{count==2}:
        out_lane_bns:  #outer return lane bonus - specials  ##outer lanes 50,000 bonus 
            color: red
            fade: 500ms
  abc_lanes_done{count==3}:
        led_abc_special:  #replay - shoot again bonus
            color: red
            fade: 500ms

variable_player:
  lane_change_on_hit:
    score: 100 * current_player.pf_multiplier
  lane_change_off_hit:
    score: 500 * current_player.pf_multiplier
  lane_change_on_complete:
    score: 5000 * current_player.pf_multiplier
  mode_lane_change_started:
    pf_multiplier:
      int: 1
      action: set
    abc_bns_multiplier:
      int: 1
      action: set  
    abc_bns_multiplier_2:
      int: 1
      action: set
    #pf_bonus_multiplier:
      #int: 0
      #action: set
  abc_lanes_done{count==1}: ##return lanes 50,000 bonus 
    abc_bns_multiplier:
      int: 100
      action: set
    pf_bonus_multiplier:
      int: 1
      action: set
    bonus_return_lanes_lit: 1
    #pf_bonus_3x_multiplier:
      #int: 0
      #action: set
  abc_lanes_done{count==2}:
    abc_bns_multiplier_2:
      int: 100
      action: set
    bonus_out_lanes_lit: 1
    pf_bonus_3x_multiplier:
      int: 1
      action: set
  lane_change_complete:
    score: 1000 * current_player.pf_multiplier
    
  abc_lanes_done{count==4}:
    replay_shoot_again_lit:
      int: 1
      action: set
    bonus_replay_achieved: 1
    
  s_ro_left_lwr_out_active:
    score: 500 * current_player.abc_bns_multiplier
  s_ro_right_lwr_out_active:
    score: 500 * current_player.abc_bns_multiplier
  s_ro_left_lwr_in_active:
    score: 500 * current_player.abc_bns_multiplier_2
  s_ro_right_lwr_in_active:
    score: 500 * current_player.abc_bns_multiplier_2
    
event_player:
  mode_lane_change_started: initialize_abc_lanes
  abc_lanes_done{count==1}: stage_1_abc_lanes_complete   # arrows lit
  abc_lanes_done{count==2}: stage_2_abc_lanes_complete  # special lit
  abc_lanes_done{count==3}: stage_3_abc_lanes_complete   #abc special lit
  abc_lanes_done{count==4}: stage_4_abc_lanes_complete  #shoot again
    
#slide_player:
  #abc_lanes_done{count==1}:  2x_multiplier
  #abc_lanes_done{count==2}:  3x_multiplier
  #lane_change_off_complete:
    #2x_multiplier:
      #action: remove
      #transition:
        #type: fade
        #duration: 1s
    #3x_multiplier:
      #action: remove
      #transition:
        #type: fade
        #duration: 1s

#- duration: 3
#slides:
  #2x_multiplier:
    #- type: text
      #font_name: ancienttext
      #color: white
      #text: 2X Multiplier!
      #font_size: 90
      #z: 16
      #y: 40
      #anchor_y: bottom
      #expire: 10s
    #- type: video
      #video: 2x_multiplier_video
      #height: 768
      #width: 1366
      #z: 15
      #expire: 10s
  #3x_multiplier:
    #- type: text
      #font_name: ancienttext
      #color: white
      #text: 3X Multiplier!
      #font_size: 90
      #z: 16
      #y: 40
      #anchor_y: bottom
      #expire: 10s
    #- type: video
      #video: 3x_multiplier_video
      #height: 768
      #width: 1366
      #z: 15
      #expire: 10s


